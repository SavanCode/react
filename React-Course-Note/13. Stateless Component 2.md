## Stateless Component 2

### é»˜è®¤propså€¼

æˆ‘ä»¬å·²ç»çŸ¥é“å¯¹äºŽå‡½æ•°ç»„ä»¶æˆ‘ä»¬å¯ä»¥ä¼ å…¥propsï¼Œä½†æ˜¯å¦‚æžœæ²¡æœ‰ä¼ å…¥propsä¼šæ€Žä¹ˆæ ·å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç»™ä»–è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Headerç»„ä»¶ï¼Œç»™ä»–ä¼ å…¥propsï¼Œé‡Œé¢æ˜¯titleå’Œsubtitleï¼Œç„¶åŽåœ¨ç»„ä»¶ä¸­æ¸²æŸ“è¿™ä¸¤ä¸ªå€¼ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•ç»™titleè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰ä¼ å…¥titleï¼Œä¹Ÿå¯ä»¥è®©ä»–æ˜¾ç¤ºå†…å®¹ã€‚å¯ä»¥åœ¨ç»„ä»¶ä¸‹åŠ ä¸Šä¸‹é¢çš„ä»£ç ðŸ‘‡

``` javascript
class IndecisionApp extends React.Component {
  constructor(props) {
    super(props);
    this.handleDeleteOptions = this.handleDeleteOptions.bind(this);
    this.handlePick = this.handlePick.bind(this);
    this.handleAddOption = this.handleAddOption.bind(this);
    this.state = {
      options: []
    };
  }
  handleDeleteOptions() {
    this.setState(() => {
      return {
        options: []
      };
    });
  }
  handlePick() {
    const randomNum = Math.floor(Math.random() * this.state.options.length);
    const option = this.state.options[randomNum];
    alert(option);
  }
  handleAddOption(option) {
    if (!option) {
      return 'Enter valid value to add item';
    } else if (this.state.options.indexOf(option) > -1) {
      return 'This option already exists';
    }

    this.setState((prevState) => {
      return {
        options: prevState.options.concat(option)
      };
    });
  }
  render() {
    const subtitle = 'Put your life in the hands of a computer';

    return (
      <div>
        <Header subtitle={subtitle} />
        <Action
          hasOptions={this.state.options.length > 0}
          handlePick={this.handlePick}
        />
        <Options
          options={this.state.options}
          handleDeleteOptions={this.handleDeleteOptions}
        />
        <AddOption
          handleAddOption={this.handleAddOption}
        />
      </div>
    );
  }
}
const Header = (props) => {
  return (
    <div>
      <h1>{props.title}</h1>
      {props.subtitle && <h2>{props.subtitle}</h2>}
    </div>
  );
};
Header.defaultProps = {
  title: "Indecision"
}
```

è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦ä¼ å…¥titleçš„å€¼äº†ï¼ŒåŒæ—¶æˆ‘ä»¬æŠŠsubtitleæ”¹æˆæ¡ä»¶æ¸²æŸ“ã€‚

ä¸åªæ˜¯å‡½æ•°ç»„ä»¶å¯ä»¥è®¾ç½®é»˜è®¤å€¼ï¼Œç±»ç»„ä»¶ä¹Ÿå¯ä»¥ã€‚æˆ‘ä»¬å¯ä»¥ç»™IndecisionAppç»„ä»¶ä¼ å…¥ä¸€ä¸ªé»˜è®¤çš„optionsæ•°ç»„ï¼Œå¦‚æžœæˆ‘ä¼ å…¥äº†å¸¦optionçš„optionsæ•°ç»„ï¼Œå°±ä½¿ç”¨ä¼ å…¥çš„æ•°ç»„ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œoptionsé»˜è®¤ä¸ºç©ºæ•°ç»„ï¼Œè¿™ç§åšæ³•ä¹Ÿæ˜¯å¾ˆæœ‰æ•ˆçš„ã€‚

``` javascript
class IndecisionApp extends React.Component {
  constructor(props) {
    super(props);
    this.handleDeleteOptions = this.handleDeleteOptions.bind(this);
    this.handlePick = this.handlePick.bind(this);
    this.handleAddOption = this.handleAddOption.bind(this);
    this.state = {
      options: props.options
    };
  }
  handleDeleteOptions() {
    this.setState(() => {
      return {
        options: []
      };
    });
  }
  handlePick() {
    const randomNum = Math.floor(Math.random() * this.state.options.length);
    const option = this.state.options[randomNum];
    alert(option);
  }
  handleAddOption(option) {
    if (!option) {
      return 'Enter valid value to add item';
    } else if (this.state.options.indexOf(option) > -1) {
      return 'This option already exists';
    }

    this.setState((prevState) => {
      return {
        options: prevState.options.concat(option)
      };
    });
  }
  render() {
    const subtitle = 'Put your life in the hands of a computer';
    return (
      <div>
        <Header subtitle={subtitle} />
        <Action
          hasOptions={this.state.options.length > 0}
          handlePick={this.handlePick}
        />
        <Options
          options={this.state.options}
          handleDeleteOptions={this.handleDeleteOptions}
        />
        <AddOption
          handleAddOption={this.handleAddOption}
        />
      </div>
    );
  }
}
IndecisionApp.defaultProps = {
  options: []
}
ReactDOM.render(<IndecisionApp options={["Option 1", "Option 2"]} />, document.getElementById('app'));
```

#### ç»ƒä¹ 

å¯¹äºŽä¹‹å‰å†™è¿‡çš„counterç¨‹åºï¼Œç»™counterè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ä¸º0ï¼Œå¦‚æžœä¼ å…¥counterï¼Œåˆ™ä½¿ç”¨ä¼ å…¥çš„å€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚

### React Dev Tools

https://github.com/facebook/react/tree/master/packages/react-devtools#the-react-tab-doesnt-show-up

å¯ä»¥åœ¨chromeæˆ–è€…firefoxé‡Œå®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œå®‰è£…åŽä¼šåœ¨ä½ çš„å¼€å‘è€…å·¥å…·ä¸­å¤šå‡ºComponentè¿™ä¸ªtabï¼Œé€šè¿‡è¿™ä¸ªtabä½ å¯ä»¥å¯¹ä½ çš„reactç¨‹åºè¿›è¡Œdebugã€‚é‡Œé¢ä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ç»„ä»¶ï¼Œstateï¼Œpropsï¼Œè¿™ä¼šè®©ä½ çš„å¼€å‘è¿‡ç¨‹æ›´åŠ æ–¹ä¾¿ã€‚

### åˆ é™¤option

æŽ¥ä¸‹æ¥æˆ‘ä»¬æƒ³åœ¨å·²æœ‰çš„ç¨‹åºä¸ŠåŠ ä¸Šä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯åˆ é™¤å•ä¸ªoptionã€‚

1. é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æŽ¥æ”¶ä½ æƒ³è¦åˆ é™¤çš„optionï¼Œç„¶åŽåˆ©ç”¨setStateåŽ»åˆ æŽ‰å®ƒã€‚æˆ‘ä»¬å…ˆç»™è¿™ä¸ªå‡½æ•°ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼Œå°±æ˜¯consoleå‡ºæ¥è¦åˆ é™¤çš„optionï¼Œä¹‹åŽåœ¨åŠ å…¥åˆ é™¤çš„é€»è¾‘ã€‚
2. ç„¶åŽæˆ‘ä»¬éœ€è¦åœ¨constructorä¸­bindè¿™ä¸ªå‡½æ•°ã€‚
3. æˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°é€šè¿‡Optionsç»„ä»¶ä¼ ç»™Optionç»„ä»¶ã€‚
4. ç„¶åŽéœ€è¦åœ¨Optionç»„ä»¶ä¸­åˆ›å»ºä¸€ä¸ªbuttonæ¥åˆ é™¤å¯¹åº”çš„optionã€‚ç”±äºŽbuttonæœ‰ä¸€ä¸ªé»˜è®¤çš„eventäº‹ä»¶ï¼Œå½“ä½ ç‚¹å‡»æ˜¯ï¼Œä¼ å…¥å‡½æ•°çš„å‚æ•°çš„è¿™ä¸ªevertå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™å‡½æ•°ä¼ å…¥optionä½œä¸ºå‚æ•°ï¼ŒäºŽæ˜¯æˆ‘ä»¬å°±è¦é€šè¿‡ðŸ‘‡ä¸‹é¢è¿™ç§æ–¹å¼æ¥å®žçŽ°ã€‚
5. æŽ¥ä¸‹æ¥æˆ‘ä»¬ç»™handleDeleteOptionåŠ ä¸Šåˆ é™¤çš„é€»è¾‘ã€‚æˆ‘ä»¬åˆ©ç”¨filteræ–¹æ³•ï¼ŒæŠŠoptionsæ•°ç»„ä¸­ç¬¦åˆoptionçš„é¡¹åˆ æŽ‰ã€‚

``` javascript
class IndecisionApp extends React.Component {
  constructor(props) {
    super(props);
    this.handleDeleteOptions = this.handleDeleteOptions.bind(this);
    this.handlePick = this.handlePick.bind(this);
    this.handleAddOption = this.handleAddOption.bind(this);
    this.handleDeleteOption = this.handleDeleteOption.bind(this);
    this.state = {
      options: props.options
    };
  }
  handleDeleteOptions() {
    // å‡½æ•°è¿”å›žçš„ç®€åŒ–æ–¹å¼
    this.setState(() => ({ options: [] }));
  }
  handleDeleteOption(optionToRemove) {
    console.log("hdo ", optionToRemove);
    this.setState((prevState) => ({
      options: prevState.options.filter((option) => {
        return optionToRemove !== option
      })
    }));
  }
  handlePick() {
    const randomNum = Math.floor(Math.random() * this.state.options.length);
    const option = this.state.options[randomNum];
    alert(option);
  }
  handleAddOption(option) {
    if (!option) {
      return 'Enter valid value to add item';
    } else if (this.state.options.indexOf(option) > -1) {
      return 'This option already exists';
    }

    this.setState((prevState) => ({
      options: prevState.options.concat(option)
    }));
  }
  render() {
    const subtitle = 'Put your life in the hands of a computer';

    return (
      <div>
        <Header subtitle={subtitle} />
        <Action
          hasOptions={this.state.options.length > 0}
          handlePick={this.handlePick}
        />
        <Options
          options={this.state.options}
          handleDeleteOptions={this.handleDeleteOptions}
          handleDeleteOption={this.handleDeleteOption}
        />
        <AddOption
          handleAddOption={this.handleAddOption}
        />
      </div>
    );
  }
}
...
const Options = (props) => {
  return (
    <div>
      <button onClick={props.handleDeleteOptions}>Remove All</button>
      {
        props.options.map((option) => (
          <Option
            key={option}
            optionText={option}
            handleDeleteOption={props.handleDeleteOption}
          />
        ))
      }
    </div>
  );
};
const Option = (props) => {
  return (
    <div>
      {props.optionText}
      <button
        onClick={(e) => {
          props.handleDeleteOption(props.optionText);
        }}
      >
        remove
      </button>
    </div>
  );
};
...
```



