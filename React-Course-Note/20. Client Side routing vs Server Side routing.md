## Client Side routing vs Server Side routing

我们来说一下服务器端路由和客户端路由之间的区别。服务器端路由是更传统的方法，我们在服务器上定义路由。客户端路由是一种更现代的方法，我们使用客户端javascript来动态改变显示在屏幕上的内容。

所以，让我们把浏览器加入进来，讨论一下在传统服务器端路由情况下会发生什么。

<img src="https://i.loli.net/2020/07/31/tpxn83M6ZvfUeIc.png" alt="image-20200730172935664" style="zoom:50%;" />

在浏览器中，我要么第一次进入一个页面或者第一次改变页面，也许我在导航栏点击一个链接从帐户页切换到个人资料页。第一步浏览器检测到更改它看到url改变，它知道为了渲染正确的url，它需要与服务器通信，所以浏览器发出一个HTTP请求到服务器，服务器响应需要渲染的HTML然后浏览器显示所有的东西。 它会完全删除浏览器中显示的内容，并将其完全替换为即将返回的新的HTML。这个过程开销很大，生成HTTP请求和等待响应需要时间。所以就会产生网络延迟，它会在浏览器渲染前造成一点延迟。

接下来我们来看客户端路由。因此，在客户端路由中，我们使用客户端javascript处理应用程序在客户端的呈现。第一次加载应用时我们仍然需要去服务器，我们必须说，嘿，我想要这个应用，服务器将返回HTML，然后我们的客户端javascript会开始呈现react应用。但是对于每一个其他的页面更改，比如用户是否点击一个切换页面的链接，或者他们是否被重定向基于他们所采取的一些操作，我们将使用客户端javascript来处理这个问题，这意味着我们不需要为了重新进入页面而往返于服务器。相反，我们将使用浏览器提供的HTML5 history API，它允许我们观察url的变化，并在实际发生变化时运行一些javascript代码。它还允许我们说，不要为这个url去到服务器，我已经讲过了只要url发生变化就运行这个函数。

这允许我们在客户端javascript内部做一些基于变化的事情。我们要做什么？我们只需要在屏幕上呈现一个新组件。也许我们渲染了应用程序的一部分，保留了标题，也许我们渲染整个页面，而不管我们做什么，这个过程不再需要我们与服务器通信，它将运行得更快。

<img src="https://i.loli.net/2020/07/31/LmnGy6IOCPtQSvw.png" alt="image-20200730181559554" style="zoom:50%;" />

现在，当Do something运行时到底发生了什么。在现实中，react路由器或任何其他客户端路由解决方案，他们会去看你的配置文件。在react路由器中，我们会有一组url和一组组件来呈现这些url。对于应用程序的根，我可能有一个App组件来渲染，对于/help，我可能渲染Help组件，/about渲染About组件。实际上，当url发生变化时，我们会找到匹配的组件(如果有的话)，然后我们用javascript函数调用渲染一些东西，例如ReactDOM.render。

<img src="https://i.loli.net/2020/07/31/y9Kz76v3qiErfSs.png" alt="image-20200730205113249" style="zoom:50%;" />

因此，使用react路由，我们将能够在客户端javascript动态地呈现我们的应用程序，这允许我们创建一个单独的页面应用程序，在其中我们只需交换组件来模拟页面更改。重要的是要注意，react路由或者react，他们并没有创建客户端路由，也没有推广它。在react之前路由就已经非常流行了，react路由只是基于react来实现的，它利了我们使用JSX，我们将使用JSX来配置。